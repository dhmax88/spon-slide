!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.sponResize=e()}(this,function(){"use strict";function t(t){return t=t||Object.create(null),{on:function(e,n){(t[e]||(t[e]=[])).push(n)},off:function(e,n){t[e]&&t[e].splice(t[e].indexOf(n)>>>0,1)},emit:function(e,n){(t[e]||[]).slice().map(function(t){t(n)}),(t["*"]||[]).slice().map(function(t){t(e,n)})}}}function e(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.map(function(t,n,r){return{PREV:r[n-1]?n-1:!0===e?r.length-1:n,NEXT:r[n+1]?n+1:!0===e?0:n}})},o=function(t,e,n){var r=!1,i=function n(i,o){if(o.stopPropagation(),e.removeEventListener(t,n),o.target===e&&!r)return r=!0,void i()};return new Promise(function(r){n&&n(),e.addEventListener(t,i.bind(null,r),!1)})},a=function(){var t=document.createElement("div");return function(e){return t.innerHTML=e,t.children[0]}}(),s=function(){var t=this;this.defaults={animationType:"animation",selector:"[data-slide-item]",previousButton:"[data-slide-prev]",nextButton:"[data-slide-next]",activeClass:"is-current",loop:!1,delay:3e3,wrap:!0,dots:!0,promiseBefore:!1,paginationParent:!1,animateOnInit:!1,startingIndex:function(){return 0},paginationWrapper:"<div></div>",paginationButtons:function(t){return t.map(function(){return"<button />"})}},this.setOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.options=r({},t.options,{options:e}),t},this.init=function(){var n=t.options,r=n.selector,o=n.previousButton,a=n.nextButton,s=n.activeClass,u=n.loop,c=n.wrap,d=n.dots,l=n.startingIndex,p=n.animateOnInit,f=t.$el.querySelector("."+s);return t.$slides=[].concat(e(t.$el.querySelectorAll(r))),t.total=t.$slides.length-1,t.$prevBtn=o&&t.$el.querySelector(o),t.$nextBtn=a&&t.$el.querySelector("[data-slide-next]"),t.handle,t.timer,!f&&t.$slides[0].classList.add(s),t.startingIndex=l(t.$slides),t.machine=i(t.$slides,c),t.$prevBtn&&t.$prevBtn.addEventListener("click",t.prev),t.$nextBtn&&t.$nextBtn.addEventListener("click",t.next),t.currentIndex=t.startingIndex,d&&t._renderPager(t.startingIndex),u&&t._loop(),p&&t.goTo(t.startingIndex),t.started=!0,t},this.reset=function(){var n=t.option,r=n.selector,o=n.activeClass,a=n.loop,s=n.wrap,u=t.$nodes.indexOf(t.$el.querySelector("."+o));return a&&t._cancelLoop(),t.currentIndex=u>-1?u:0,t.$slides=[].concat(e(t.$el.querySelectorAll(r))),t.total=t.$slides.length-1,t.machine=i(t.$slides,s),t},this.destroy=function(){var e=t.option,n=e.activeClass,r=e.loop,i=e.dots;return r&&t._cancelLoop(),t.$prevBtn&&(t.$prevBtn.removeEventListener("click",t.prev),t.$prevBtn.removeAttribute("disabled")),t.$nextBtn&&(t.$nextBtn.removeEventListener("click",t.next),t.$nextBtn.removeAttribute("disabled")),i&&(t.$pagerButtons.forEach(function(e){return e.removeEventListener("click",t.onPagerClick)}),t.$pagerWrapper.parentNode.removeChild(t.$pagerWrapper)),t.$slides[t.currentIndex].classList.remove(n),t.$slides.forEach(function(t){return t.setAttribute("data-slide-item")}),t.$slides=[],t.off("*"),t},this.prev=function(e){e&&e.preventDefault(),t._transition(t.currentIndex,"PREV")},this.next=function(e){e&&e.preventDefault(),t._transition(t.currentIndex,"NEXT")},this.before=function(e){return t.options.promiseBefore?new Promise(function(n){t.emit("spon:before",{props:e,resolve:n})}):Promise.resolve()},this.goTo=function(e){if(log(e),!(t.currentIndex===e&&t.started||t.isRuning)){t.isRuning=!0;var n=t.options,i=n.activeClass,a=n.loop,s=n.animationType,u=n.dots,c=n.wrap,d=(e>t.currentIndex||0===e&&t.currentIndex===t.total)&&!(e===t.total&&0===t.currentIndex),l=t.$slides[t.currentIndex],p=t.$slides[e],f={direction:d?"forwards":"backwards",currentEl:l,nextEl:p},v=r({},f,{newIndex:e,currentIndex:t.currentIndex});c||t._updateButtonStates(e),"custom"!==s?t.before(r({},v)).then(function(){t.emit("spon:change",v),t.$slides.filter(function(n,r){return r!==t.currentIndex&&r!==e}).forEach(function(t){return t.setAttribute("data-slide-item","")}),o("animationend webkitAnimationEnd",l,function(){l.classList.remove(i),l.setAttribute("data-slide-item",d?"hide-prev":"hide-next")}).then(function(){t.emit("spon:after",f)}),t.isRuning=!1,a&&(t._cancelLoop(),t._loop()),p.classList.add(i),p.setAttribute("data-slide-item",d?"show-next":"show-prev"),u&&t._updatePagerButtons(e),t.currentIndex=e}):t.before(v).then(function(){u&&t._updatePagerButtons(e),t.emit("spon:after",f),t.currentIndex=e,t.isRuning=!1,a&&(t._cancelLoop(),t._loop())})}},this._transition=function(e,n){var r=t.machine[e][n];t.emit("spon:"+n.toLowerCase(),{current:t.currentIndex,next:r,slides:t.$slides}),t.goTo(r)},this._updateButtonStates=function(e){var n=0===e,r=e===t.total;t.$prevBtn[n?"setAttribute":"removeAttribute"]("disabled",n),t.$nextBtn[r?"setAttribute":"removeAttribute"]("disabled",r)},this._onPagerClick=function(e){t._updatePagerButtons(e),t.goTo(e)},this._updatePagerButtons=function(e){t.$pagerButtons[t.currentIndex].setAttribute("data-slide-pager",""),t.$pagerButtons[e].setAttribute("data-slide-pager","active")},this._renderPager=function(e){var n=t.options,r=n.paginationParent,i=n.paginationWrapper,o=n.paginationButtons,s=r||t.$el;t.$pagerWrapper=s.appendChild(a(i)),t.$pagerButtons=o(t.$slides).map(function(t){return a(t)}).map(function(n,r){return n.setAttribute("data-slide-pager",r===e?"active":""),n.addEventListener("click",t._onPagerClick.bind(t,r)),n}),t.$pagerWrapper.appendChild(t.$pagerButtons.reduce(function(t,e){return t.appendChild(e),t},document.createDocumentFragment()))},this._loop=function(){var e=t.options.delay;t.timer=setTimeout(function(){t.handle=requestAnimationFrame(t._loop),t.next()},e)},this._cancelLoop=function(){cancelAnimationFrame(t.handle),clearTimeout(t.timer)}};return function e(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),s.call(this),this.options=r({},this.defaults,o),this.$el=i,Object.assign(this,t())}});
