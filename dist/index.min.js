!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.sponResize=t()}(this,function(){"use strict";function e(e){return e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t,n){(e[t]||[]).slice().map(function(e){e(n)}),(e["*"]||[]).slice().map(function(e){e(t,n)})}}}function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,r=function(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i)return(d=t.createElement("html")).innerHTML=e,d.removeChild(d.lastChild);var r=a[i]||a._default,o=r[0],s=r[1],l=r[2],d=t.createElement("div");for(d.innerHTML=s+e+l;o--;)d=d.lastChild;if(d.firstChild==d.lastChild)return d.removeChild(d.firstChild);for(var u=t.createDocumentFragment();d.firstChild;)u.appendChild(d.removeChild(d.firstChild));return u},o=!1;"undefined"!=typeof document&&((i=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',o=!i.getElementsByTagName("link").length,i=void 0);var a={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:o?[1,"X<div>","</div>"]:[0,"",""]};a.td=a.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],a.option=a.optgroup=[1,'<select multiple="multiple">',"</select>"],a.thead=a.tbody=a.colgroup=a.caption=a.tfoot=[1,"<table>","</table>"],a.polyline=a.ellipse=a.polygon=a.circle=a.text=a.line=a.path=a.rect=a.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var s=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.map(function(e,n,i){return{PREV:i[n-1]?{$el:i[n-1],index:n-1}:!0===t?{$el:i[i.length-1],index:i.length-1}:{$el:e,index:n},NEXT:i[n+1]?{$el:i[n+1],index:n+1}:!0===t?{$el:i[0],index:0}:{$el:i[n],index:n}}})},l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,r=function r(o,a){if(a.stopPropagation(),t.removeEventListener(e,r),a.target===t&&!i)return i=!0,n(),void o()};return new Promise(function(n){t.addEventListener(e,r.bind(null,n),!1)})},d=function(e){var t=void 0;t=!e||"transition"!==e&&"trans"!==e?{OAnimation:"oAnimationEnd",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",animation:"animationend"}:{OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",transition:"transitionend"};var n=document.createElement("fake");return Object.keys(t).reduce(function(e,i){return void 0!==n.style[i]?t[i]:e},"")},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=function(){var e=this;this.defaults={animationType:"animation",selector:"[data-slide-item]",previousButton:"[data-slide-prev]",nextButton:"[data-slide-next]",activeClass:"c-slide__item--current",loop:!1,delay:3e3,wrap:!0,dots:!0,promiseBefore:!1,paginationParent:!1,animateOnInit:!1,startingIndex:function(){return 0},paginationWrapper:'<div class="absolute w-full pin-t z-10 flex justify-center"></div>',paginationButtons:function(e){return e.map(function(){return"<button>&#9679</button>"})}},this.setOptions=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.options=u({},e.options,{options:t}),e},this.init=function(){var n=e.options,i=n.selector,r=n.previousButton,o=n.nextButton,a=n.animationType,l=n.activeClass,u=n.loop,c=n.wrap,p=n.dots,f=n.startingIndex,v=n.animateOnInit,m=e.$el.querySelector("."+l);return e.$slides=[].concat(t(e.$el.querySelectorAll(i))),e.total=e.$slides.length-1,e.$prevBtn=r&&e.$el.querySelector(r),e.$nextBtn=o&&e.$el.querySelector("[data-slide-next]"),e.animationEvent=d(a),e.handle,e.timer,!m&&e.$slides[0].classList.add(l),e.startingIndex=f(e.$slides),e.machine=s(e.$slides,c),e.$prevBtn&&e.$prevBtn.addEventListener("click",e.prev),e.$nextBtn&&e.$nextBtn.addEventListener("click",e.next),e.currentIndex=e.startingIndex,p&&e._renderPager(e.startingIndex),u&&e._loop(),v&&e.goTo(e.startingIndex),e.started=!0,e},this.reset=function(){var n=e.option,i=n.selector,r=n.activeClass,o=n.loop,a=n.wrap,l=e.$nodes.indexOf(e.$el.querySelector("."+r));return o&&e._cancelLoop(),e.currentIndex=l>-1?l:0,e.$slides=[].concat(t(e.$el.querySelectorAll(i))),e.total=e.$slides.length-1,e.machine=s(e.$slides,a),e},this.destroy=function(){var t=e.option,n=t.activeClass,i=t.loop,r=t.dots;return i&&e._cancelLoop(),e.$prevBtn&&(e.$prevBtn.removeEventListener("click",e.prev),e.$prevBtn.removeAttribute("disabled")),e.$nextBtn&&(e.$nextBtn.removeEventListener("click",e.next),e.$nextBtn.removeAttribute("disabled")),r&&(e.$pagerButtons.forEach(function(t){return t.removeEventListener("click",e.onPagerClick)}),e.$pagerWrapper.parentNode.removeChild(e.$pagerWrapper)),e.$slides[e.currentIndex].classList.remove(n),e.$slides.forEach(function(e){return e.setAttribute("data-slide-item")}),e.$slides=[],e.off("*"),e},this.prev=function(t){t&&t.preventDefault(),e.emit("spon:prev"),e._transition(e.currentIndex,"PREV")},this.next=function(t){t&&t.preventDefault(),e.emit("spon:next"),log(e.currentIndex),e._transition(e.currentIndex,"NEXT")},this.before=function(t){return e.options.promiseBefore?new Promise(function(n){e.emit("spon:before",{props:t,resolve:n})}):Promise.resolve()},this.goTo=function(t){if(!(e.currentIndex===t&&e.started||e.isRuning)){e.isRuning=!0;var n=e.options,i=n.activeClass,r=n.loop,o=n.animationType,a=n.dots,s=n.wrap,d=(t>e.currentIndex||0===t&&e.currentIndex===e.total)&&!(t===e.total&&0===e.currentIndex),c=e.$slides[e.currentIndex],p=e.$slides[t],f={direction:d?"forwards":"backwards",currentEl:c,nextEl:p},v=u({},f,{newIndex:t,currentIndex:e.currentIndex});s||e._updateButtonStates(t),"animation"===o||"transition"===o?e.before(u({},v)).then(function(){e.emit("spon:change",v),e.$slides.filter(function(n,i){return i!==e.currentIndex&&i!==t}).forEach(function(e){return e.setAttribute("data-slide-item","")}),l(e.animationEvent,c,function(){c.classList.remove(i),c.setAttribute("data-slide-item",d?"hide-prev":"hide-next")}).then(function(){e.emit("spon:after",f)}),e.isRuning=!1,r&&(e._cancelLoop(),e._loop()),p.classList.add(i),p.setAttribute("data-slide-item",d?"show-next":"show-prev"),a&&e._updatePagerButtons(t),e.currentIndex=t}):e._customTransition(v).then(function(){a&&e._updatePagerButtons(t),e.emit("spon:after",f),e.currentIndex=t,e.isRuning=!1})}},this._transition=function(t,n){var i=e.machine[t][n];e.goTo(i.index)},this._updateButtonStates=function(t){var n=0===t,i=t===e.total;e.$prevBtn[n?"setAttribute":"removeAttribute"]("disabled",n),e.$nextBtn[i?"setAttribute":"removeAttribute"]("disabled",i)},this._customTransition=function(t){return e.options.promiseBefore?new Promise(function(n){e.emit("spon:before",{props:t,resolve:n})}):Promise.resolve()},this._onPagerClick=function(t){e._updatePagerButtons(t),e.goTo(t)},this._updatePagerButtons=function(t){e.$pagerButtons[e.currentIndex].setAttribute("data-slide-pager",""),e.$pagerButtons[t].setAttribute("data-slide-pager","active")},this._renderPager=function(t){var n=e.options,i=n.paginationParent,o=n.paginationWrapper,a=n.paginationButtons,s=i||e.$el;e.$pagerWrapper=s.appendChild(r(o)),e.$pagerButtons=a(e.$slides).map(function(e){return r(e)}).map(function(n,i){return n.setAttribute("data-slide-pager",i===t?"active":""),n.addEventListener("click",e._onPagerClick.bind(e,i)),n}),e.$pagerWrapper.appendChild(e.$pagerButtons.reduce(function(e,t){return e.appendChild(t),e},document.createDocumentFragment()))},this._loop=function(){var t=e.options.delay;e.timer=setTimeout(function(){e.handle=requestAnimationFrame(e._loop),e.next()},t)},this._cancelLoop=function(){cancelAnimationFrame(e.handle),clearTimeout(e.timer)}};return function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),c.call(this),this.options=u({},this.defaults,r),this.$el=i,Object.assign(this,e())}});
