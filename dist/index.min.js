!(function(t, e) {
	'object' == typeof exports && 'undefined' != typeof module
		? (module.exports = e())
		: 'function' == typeof define && define.amd
			? define(e)
			: (t.sponResize = e())
})(this, function() {
	'use strict'
	function t(t) {
		return (
			(t = t || Object.create(null)),
			{
				on: function(e, n) {
					;(t[e] || (t[e] = [])).push(n)
				},
				off: function(e, n) {
					t[e] && t[e].splice(t[e].indexOf(n) >>> 0, 1)
				},
				emit: function(e, n) {
					;(t[e] || []).slice().map(function(t) {
						t(n)
					}),
						(t['*'] || []).slice().map(function(t) {
							t(e, n)
						})
				}
			}
		)
	}
	function e(t, e) {
		var n
		if ('function' != typeof e) throw new TypeError(v)
		return (
			(t = a(t)),
			function() {
				return (
					--t > 0 && (n = e.apply(this, arguments)), t <= 1 && (e = void 0), n
				)
			}
		)
	}
	function n(t) {
		var e = typeof t
		return !!t && ('object' == e || 'function' == e)
	}
	function i(t) {
		return !!t && 'object' == typeof t
	}
	function r(t) {
		return 'symbol' == typeof t || (i(t) && w.call(t) == b)
	}
	function o(t) {
		return t
			? (t = s(t)) === m || t === -m ? (t < 0 ? -1 : 1) * h : t === t ? t : 0
			: 0 === t ? t : 0
	}
	function a(t) {
		var e = o(t),
			n = e % 1
		return e === e ? (n ? e - n : e) : 0
	}
	function s(t) {
		if ('number' == typeof t) return t
		if (r(t)) return g
		if (n(t)) {
			var e = 'function' == typeof t.valueOf ? t.valueOf() : t
			t = n(e) ? e + '' : e
		}
		if ('string' != typeof t) return 0 === t ? t : +t
		t = t.replace(x, '')
		var i = y.test(t)
		return i || B.test(t) ? E(t.slice(2), i ? 2 : 8) : $.test(t) ? g : +t
	}
	function u(t) {
		if (Array.isArray(t)) {
			for (var e = 0, n = Array(t.length); e < t.length; e++) n[e] = t[e]
			return n
		}
		return Array.from(t)
	}
	function l(t, e) {
		if (!(t instanceof e))
			throw new TypeError('Cannot call a class as a function')
	}
	var c,
		d = function(t, e) {
			if ('string' != typeof t) throw new TypeError('String expected')
			e || (e = document)
			var n = /<([\w:]+)/.exec(t)
			if (!n) return e.createTextNode(t)
			t = t.replace(/^\s+|\s+$/g, '')
			var i = n[1]
			if ('body' == i)
				return (
					((u = e.createElement('html')).innerHTML = t),
					u.removeChild(u.lastChild)
				)
			var r = f[i] || f._default,
				o = r[0],
				a = r[1],
				s = r[2],
				u = e.createElement('div')
			for (u.innerHTML = a + t + s; o--; ) u = u.lastChild
			if (u.firstChild == u.lastChild) return u.removeChild(u.firstChild)
			for (var l = e.createDocumentFragment(); u.firstChild; )
				l.appendChild(u.removeChild(u.firstChild))
			return l
		},
		p = !1
	'undefined' != typeof document &&
		(((c = document.createElement('div')).innerHTML =
			'  <link/><table></table><a href="/a">a</a><input type="checkbox"/>'),
		(p = !c.getElementsByTagName('link').length),
		(c = void 0))
	var f = {
		legend: [1, '<fieldset>', '</fieldset>'],
		tr: [2, '<table><tbody>', '</tbody></table>'],
		col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],
		_default: p ? [1, 'X<div>', '</div>'] : [0, '', '']
	}
	;(f.td = f.th = [3, '<table><tbody><tr>', '</tr></tbody></table>']),
		(f.option = f.optgroup = [1, '<select multiple="multiple">', '</select>']),
		(f.thead = f.tbody = f.colgroup = f.caption = f.tfoot = [
			1,
			'<table>',
			'</table>'
		]),
		(f.polyline = f.ellipse = f.polygon = f.circle = f.text = f.line = f.path = f.rect = f.g = [
			1,
			'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',
			'</svg>'
		])
	var v = 'Expected a function',
		m = 1 / 0,
		h = 1.7976931348623157e308,
		g = NaN,
		b = '[object Symbol]',
		x = /^\s+|\s+$/g,
		$ = /^[-+]0x[0-9a-f]+$/i,
		y = /^0b[01]+$/i,
		B = /^0o[0-7]+$/i,
		E = parseInt,
		w = Object.prototype.toString,
		I = function(t) {
			return e(2, t)
		},
		_ = function(t) {
			var e = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]
			return t.map(function(t, n, i) {
				return {
					PREV: i[n - 1]
						? { $el: i[n - 1], index: n - 1 }
						: !0 === e
							? { $el: i[i.length - 1], index: i.length - 1 }
							: { $el: t, index: n },
					NEXT: i[n + 1]
						? { $el: i[n + 1], index: n + 1 }
						: !0 === e ? { $el: i[0], index: 0 } : { $el: i[n], index: n }
				}
			})
		},
		A = function(t, e, n) {
			function i(n) {
				n(), e.removeEventListener(t, i)
			}
			return new Promise(function(r) {
				e.addEventListener(t, I(i.bind(null, r))), n()
			})
		},
		T = function(t) {
			var e = void 0
			e =
				!t || ('transition' !== t && 'trans' !== t)
					? {
							OAnimation: 'oAnimationEnd',
							WebkitAnimation: 'webkitAnimationEnd',
							MozAnimation: 'animationend',
							animation: 'animationend'
						}
					: {
							OTransition: 'oTransitionEnd',
							WebkitTransition: 'webkitTransitionEnd',
							MozTransition: 'transitionend',
							transition: 'transitionend'
						}
			var n = document.createElement('fake')
			return Object.keys(e).reduce(function(t, i) {
				return void 0 !== n.style[i] ? e[i] : t
			}, '')
		},
		C =
			Object.assign ||
			function(t) {
				for (var e = 1; e < arguments.length; e++) {
					var n = arguments[e]
					for (var i in n)
						Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i])
				}
				return t
			},
		k = function() {
			var t = this
			;(this.defaults = {
				animationType: 'animation',
				selector: '[data-slide-item]',
				previousButton: '[data-slide-prev]',
				nextButton: '[data-slide-next]',
				activeClass: 'c-slide__item--current',
				loop: !1,
				delay: 3e3,
				wrap: !0,
				dots: !0,
				promiseBefore: !1,
				paginationParent: !1,
				animateOnInit: !1,
				startingIndex: function() {
					return 0
				},
				paginationWrapper:
					'<div class="absolute w-full pin-t z-10 flex justify-center"></div>',
				paginationButtons: function(t) {
					return t.map(function() {
						return '<button>&#9679</button>'
					})
				}
			}),
				(this.setOptions = function() {
					var e =
						arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}
					return (t.options = C({}, t.options, { options: e })), t
				}),
				(this.init = function() {
					var e = t.options,
						n = e.selector,
						i = e.previousButton,
						r = e.nextButton,
						o = e.animationType,
						a = e.activeClass,
						s = e.loop,
						l = e.wrap,
						c = e.dots,
						d = e.startingIndex,
						p = e.animateOnInit,
						f = t.$el.querySelector('.' + a)
					return (
						(t.$slides = [].concat(u(t.$el.querySelectorAll(n)))),
						(t.total = t.$slides.length - 1),
						(t.$prevBtn = i && t.$el.querySelector(i)),
						(t.$nextBtn = r && t.$el.querySelector('[data-slide-next]')),
						(t.animationEvent = T(o)),
						t.handle,
						t.timer,
						!f && t.$slides[0].classList.add(a),
						(t.startingIndex = d(t.$slides)),
						(t.machine = _(t.$slides, l)),
						t.$prevBtn && t.$prevBtn.addEventListener('click', t.prev),
						t.$nextBtn && t.$nextBtn.addEventListener('click', t.next),
						(t.currentIndex = t.startingIndex),
						c && t._renderPager(t.startingIndex),
						s && t._loop(),
						p && t.goTo(t.startingIndex),
						(t.started = !0),
						t
					)
				}),
				(this.reset = function() {
					var e = t.option,
						n = e.selector,
						i = e.activeClass,
						r = e.loop,
						o = e.wrap,
						a = t.$nodes.indexOf(t.$el.querySelector('.' + i))
					return (
						r && t._cancelLoop(),
						(t.currentIndex = a > -1 ? a : 0),
						(t.$slides = [].concat(u(t.$el.querySelectorAll(n)))),
						(t.total = t.$slides.length - 1),
						(t.machine = _(t.$slides, o)),
						t
					)
				}),
				(this.destroy = function() {
					var e = t.option,
						n = e.activeClass,
						i = e.loop,
						r = e.dots
					return (
						i && t._cancelLoop(),
						t.$prevBtn &&
							(t.$prevBtn.removeEventListener('click', t.prev),
							t.$prevBtn.removeAttribute('disabled')),
						t.$nextBtn &&
							(t.$nextBtn.removeEventListener('click', t.next),
							t.$nextBtn.removeAttribute('disabled')),
						r &&
							(t.$pagerButtons.forEach(function(e) {
								return e.removeEventListener('click', t.onPagerClick)
							}),
							t.$pagerWrapper.parentNode.removeChild(t.$pagerWrapper)),
						t.$slides[t.currentIndex].classList.remove(n),
						t.$slides.forEach(function(t) {
							return t.setAttribute('data-slide-item')
						}),
						(t.$slides = []),
						t.off('*'),
						t
					)
				}),
				(this.prev = function(e) {
					e && e.preventDefault(),
						t.emit('spon:prev'),
						t._transition(t.currentIndex, 'PREV')
				}),
				(this.next = function(e) {
					e && e.preventDefault(),
						t.emit('spon:next'),
						log(t.currentIndex),
						t._transition(t.currentIndex, 'NEXT')
				}),
				(this.before = function(e) {
					return t.options.promiseBefore
						? new Promise(function(n) {
								t.emit('spon:before', { props: e, resolve: n })
							})
						: Promise.resolve()
				}),
				(this.goTo = function(e) {
					if (!((t.currentIndex === e && t.started) || t.isRuning)) {
						t.isRuning = !0
						var n = t.options,
							i = n.activeClass,
							r = n.loop,
							o = n.animationType,
							a = n.dots,
							s = n.wrap,
							u =
								(e > t.currentIndex ||
									(0 === e && t.currentIndex === t.total)) &&
								!(e === t.total && 0 === t.currentIndex),
							l = t.$slides[t.currentIndex],
							c = t.$slides[e],
							d = {
								direction: u ? 'forwards' : 'backwards',
								currentEl: l,
								nextEl: c
							},
							p = C({}, d, { newIndex: e, currentIndex: t.currentIndex })
						s || t._updateButtonStates(e),
							'animation' === o || 'transition' === o
								? t.before(C({}, p)).then(function() {
										t.emit('spon:change', p),
											t.$slides
												.filter(function(n, i) {
													return i !== t.currentIndex && i !== e
												})
												.forEach(function(t) {
													return t.setAttribute('data-slide-item', '')
												}),
											A(t.animationEvent, l, function() {
												l.classList.remove(i),
													l.setAttribute(
														'data-slide-item',
														u ? 'hide-prev' : 'hide-next'
													)
											}).then(function() {
												t.emit('spon:after', d)
											}),
											(t.isRuning = !1),
											r && (t._cancelLoop(), t._loop()),
											c.classList.add(i),
											c.setAttribute(
												'data-slide-item',
												u ? 'show-next' : 'show-prev'
											),
											a && t._updatePagerButtons(e),
											(t.currentIndex = e)
									})
								: t._customTransition(p).then(function() {
										a && t._updatePagerButtons(e),
											t.emit('spon:after', d),
											(t.currentIndex = e),
											(t.isRuning = !1)
									})
					}
				}),
				(this._transition = function(e, n) {
					var i = t.machine[e][n]
					t.goTo(i.index)
				}),
				(this._updateButtonStates = function(e) {
					var n = 0 === e,
						i = e === t.total
					t.$prevBtn[n ? 'setAttribute' : 'removeAttribute']('disabled', n),
						t.$nextBtn[i ? 'setAttribute' : 'removeAttribute']('disabled', i)
				}),
				(this._customTransition = function(e) {
					return t.options.promiseBefore
						? new Promise(function(n) {
								t.emit('spon:before', { props: e, resolve: n })
							})
						: Promise.resolve()
				}),
				(this._onPagerClick = function(e) {
					t._updatePagerButtons(e), t.goTo(e)
				}),
				(this._updatePagerButtons = function(e) {
					t.$pagerButtons[t.currentIndex].setAttribute('data-slide-pager', ''),
						t.$pagerButtons[e].setAttribute('data-slide-pager', 'active')
				}),
				(this._renderPager = function(e) {
					var n = t.options,
						i = n.paginationParent,
						r = n.paginationWrapper,
						o = n.paginationButtons,
						a = i || t.$el
					;(t.$pagerWrapper = a.appendChild(d(r))),
						(t.$pagerButtons = o(t.$slides)
							.map(function(t) {
								return d(t)
							})
							.map(function(n, i) {
								return (
									n.setAttribute('data-slide-pager', i === e ? 'active' : ''),
									n.addEventListener('click', t._onPagerClick.bind(t, i)),
									n
								)
							})),
						t.$pagerWrapper.appendChild(
							t.$pagerButtons.reduce(function(t, e) {
								return t.appendChild(e), t
							}, document.createDocumentFragment())
						)
				}),
				(this._loop = function() {
					var e = t.options.delay
					t.timer = setTimeout(function() {
						;(t.handle = requestAnimationFrame(t._loop)), t.next()
					}, e)
				}),
				(this._cancelLoop = function() {
					cancelAnimationFrame(t.handle), clearTimeout(t.timer)
				})
		}
	return function e(n) {
		var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}
		l(this, e),
			k.call(this),
			(this.options = C({}, this.defaults, i)),
			(this.$el = n),
			Object.assign(this, t())
	}
})
