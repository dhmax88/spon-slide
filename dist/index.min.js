!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.sponResize=e()}(this,function(){"use strict";function t(t){return t=t||Object.create(null),{on:function(e,n){(t[e]||(t[e]=[])).push(n)},off:function(e,n){t[e]&&t[e].splice(t[e].indexOf(n)>>>0,1)},emit:function(e,n){(t[e]||[]).slice().map(function(t){t(n)}),(t["*"]||[]).slice().map(function(t){t(e,n)})}}}function e(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.map(function(t,n,i){return{PREV:i[n-1]?n-1:!0===e?i.length-1:n,NEXT:i[n+1]?n+1:!0===e?0:n}})},r=function(t,e,n){var i=!1,r=function n(r,o){if(o.stopPropagation(),e.removeEventListener(t,n),o.target===e&&!i)return i=!0,void r()};return new Promise(function(i){n&&n(),e.addEventListener(t,r.bind(null,i),!1)})},o=function(){var t="transition"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transition")?{OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",transition:"transitionend"}:{OAnimation:"oAnimationEnd",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",animation:"animationend"},e=document.createElement("div");return Object.keys(t).reduce(function(n,i){return void 0!==e.style[i]?t[i]:n},"")},a=function(){var t=document.createElement("div");return function(e){return t.innerHTML=e,t.children[0]}}(),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},u=function(){var t=this;this.defaults={animationType:"animation",selector:"[data-slide-item]",previousButton:"[data-slide-prev]",nextButton:"[data-slide-next]",activeClass:"is-current",loop:!1,delay:3e3,wrap:!0,dots:!0,promiseBefore:!1,paginationParent:!1,animateOnInit:!1,startingIndex:function(){return 0},paginationWrapper:"<div></div>",paginationButtons:function(t){return t.map(function(){return"<button />"})}},this.setOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.options=s({},t.options,{options:e}),t},this.init=function(){var n=t.options,r=n.selector,a=n.previousButton,s=n.nextButton,u=n.animationType,c=n.activeClass,d=n.loop,l=n.wrap,p=n.dots,f=n.startingIndex,v=n.animateOnInit,m=t.$el.querySelector("."+c);return t.$slides=[].concat(e(t.$el.querySelectorAll(r))),t.total=t.$slides.length-1,t.$prevBtn=a&&t.$el.querySelector(a),t.$nextBtn=s&&t.$el.querySelector("[data-slide-next]"),t.animationEvent=o(u),t.handle,t.timer,!m&&t.$slides[0].classList.add(c),t.startingIndex=f(t.$slides),t.machine=i(t.$slides,l),t.$prevBtn&&t.$prevBtn.addEventListener("click",t.prev),t.$nextBtn&&t.$nextBtn.addEventListener("click",t.next),t.currentIndex=t.startingIndex,p&&t._renderPager(t.startingIndex),d&&t._loop(),v&&t.goTo(t.startingIndex),t.started=!0,t},this.reset=function(){var n=t.option,r=n.selector,o=n.activeClass,a=n.loop,s=n.wrap,u=t.$nodes.indexOf(t.$el.querySelector("."+o));return a&&t._cancelLoop(),t.currentIndex=u>-1?u:0,t.$slides=[].concat(e(t.$el.querySelectorAll(r))),t.total=t.$slides.length-1,t.machine=i(t.$slides,s),t},this.destroy=function(){var e=t.option,n=e.activeClass,i=e.loop,r=e.dots;return i&&t._cancelLoop(),t.$prevBtn&&(t.$prevBtn.removeEventListener("click",t.prev),t.$prevBtn.removeAttribute("disabled")),t.$nextBtn&&(t.$nextBtn.removeEventListener("click",t.next),t.$nextBtn.removeAttribute("disabled")),r&&(t.$pagerButtons.forEach(function(e){return e.removeEventListener("click",t.onPagerClick)}),t.$pagerWrapper.parentNode.removeChild(t.$pagerWrapper)),t.$slides[t.currentIndex].classList.remove(n),t.$slides.forEach(function(t){return t.setAttribute("data-slide-item")}),t.$slides=[],t.off("*"),t},this.prev=function(e){e&&e.preventDefault(),t._transition(t.currentIndex,"PREV")},this.next=function(e){e&&e.preventDefault(),t._transition(t.currentIndex,"NEXT")},this.before=function(e){return t.options.promiseBefore?new Promise(function(n){t.emit("spon:before",{props:e,resolve:n})}):Promise.resolve()},this.goTo=function(e){if(!(t.currentIndex===e&&t.started||t.isRuning)){t.isRuning=!0;var n=t.options,i=n.activeClass,o=n.loop,a=n.animationType,u=n.dots,c=n.wrap,d=(e>t.currentIndex||0===e&&t.currentIndex===t.total)&&!(e===t.total&&0===t.currentIndex),l=t.$slides[t.currentIndex],p=t.$slides[e],f={direction:d?"forwards":"backwards",currentEl:l,nextEl:p},v=s({},f,{newIndex:e,currentIndex:t.currentIndex});c||t._updateButtonStates(e),"animation"===a||"transition"===a?t.before(s({},v)).then(function(){t.emit("spon:change",v),t.$slides.filter(function(n,i){return i!==t.currentIndex&&i!==e}).forEach(function(t){return t.setAttribute("data-slide-item","")}),r(t.animationEvent,l,function(){l.classList.remove(i),l.setAttribute("data-slide-item",d?"hide-prev":"hide-next")}).then(function(){t.emit("spon:after",f)}),t.isRuning=!1,o&&(t._cancelLoop(),t._loop()),p.classList.add(i),p.setAttribute("data-slide-item",d?"show-next":"show-prev"),u&&t._updatePagerButtons(e),t.currentIndex=e}):t.before(v).then(function(){u&&t._updatePagerButtons(e),t.emit("spon:after",f),t.currentIndex=e,t.isRuning=!1,o&&(t._cancelLoop(),t._loop())})}},this._transition=function(e,n){var i=t.machine[e][n];t.emit("spon:"+n.toLowerCase(),{current:t.currentIndex,next:i,slides:t.$slides}),t.goTo(i)},this._updateButtonStates=function(e){var n=0===e,i=e===t.total;t.$prevBtn[n?"setAttribute":"removeAttribute"]("disabled",n),t.$nextBtn[i?"setAttribute":"removeAttribute"]("disabled",i)},this._onPagerClick=function(e){t._updatePagerButtons(e),t.goTo(e)},this._updatePagerButtons=function(e){t.$pagerButtons[t.currentIndex].setAttribute("data-slide-pager",""),t.$pagerButtons[e].setAttribute("data-slide-pager","active")},this._renderPager=function(e){var n=t.options,i=n.paginationParent,r=n.paginationWrapper,o=n.paginationButtons,s=i||t.$el;t.$pagerWrapper=s.appendChild(a(r)),t.$pagerButtons=o(t.$slides).map(function(t){return a(t)}).map(function(n,i){return n.setAttribute("data-slide-pager",i===e?"active":""),n.addEventListener("click",t._onPagerClick.bind(t,i)),n}),t.$pagerWrapper.appendChild(t.$pagerButtons.reduce(function(t,e){return t.appendChild(e),t},document.createDocumentFragment()))},this._loop=function(){var e=t.options.delay;t.timer=setTimeout(function(){t.handle=requestAnimationFrame(t._loop),t.next()},e)},this._cancelLoop=function(){cancelAnimationFrame(t.handle),clearTimeout(t.timer)}};return function e(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e),u.call(this),this.options=s({},this.defaults,r),this.$el=i,Object.assign(this,t())}});
